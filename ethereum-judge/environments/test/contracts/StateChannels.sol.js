// Factory "morphs" into a Pudding class.
// The reasoning is that calling load in each context
// is cumbersome.

(function() {

  var contract_data = {
    abi: [{"constant":false,"inputs":[{"name":"hash","type":"bytes32"},{"name":"sig","type":"bytes"},{"name":"signer","type":"address"}],"name":"ecverify","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"hash","type":"bytes32"},{"name":"sig","type":"bytes"}],"name":"ecrecovery","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"channels","outputs":[{"name":"channelId","type":"bytes32"},{"name":"addr0","type":"address"},{"name":"addr1","type":"address"},{"name":"state","type":"bytes"},{"name":"fingerprint","type":"bytes32"},{"name":"signature0","type":"bytes"},{"name":"signature1","type":"bytes"},{"name":"phase","type":"uint8"}],"type":"function"},{"constant":false,"inputs":[{"name":"receiver","type":"address"},{"name":"amount","type":"uint256"}],"name":"sendCoin","outputs":[{"name":"sufficient","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"channelId","type":"bytes32"},{"name":"addr0","type":"address"},{"name":"addr1","type":"address"},{"name":"state","type":"bytes"},{"name":"fingerprint","type":"bytes32"},{"name":"signature0","type":"bytes"},{"name":"signature1","type":"bytes"}],"name":"addChannel","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"channelId","type":"bytes32"}],"name":"getChannelState","outputs":[{"name":"","type":"bytes"}],"type":"function"},{"constant":false,"inputs":[{"name":"addr","type":"address"}],"name":"getBalance","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"inputs":[],"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"message","type":"string"}],"name":"Error","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"label","type":"string"},{"indexed":false,"name":"message","type":"string"}],"name":"LogString","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"label","type":"string"},{"indexed":false,"name":"message","type":"bytes32"}],"name":"LogBytes","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"label","type":"string"},{"indexed":false,"name":"message","type":"bytes32"}],"name":"LogBytes32","type":"event"}],
    binary: "6060604052600160a060020a03321660009081526020819052604090206127109055610aba8061002f6000396000f3606060405236156100615760e060020a600035046339cdde32811461006357806377d32e94146100c45780637a7ebd7b1461012b57806390b98a111461017c57806396bba5ed146101ab578063d18da8b114610373578063f8b2cb4f146103f1575b005b60408051602060248035600481810135601f810185900485028601850190965285855261041695813595919460449492939092019181908401838280828437509496505093359350505050600081600160a060020a03166106d9858561010e565b60408051602060248035600481810135601f810185900485028601850190965285855261042895813595919460449492939092019181908401838280828437509496505050505050505b600060006000600084516041141515610668575b50505092915050565b600160208190526004803560009081526040902080549281015460028201549282015460078301546104459594600160a060020a039384169493169260038101929160058201916006019060ff1688565b61041660043560243533600160a060020a0316600090815260208190526040812054829010156106eb5761071d565b604080516020606435600481810135601f8101849004840285018401909552848452610061948135946024803595604435956084949201919081908401838280828437505060408051602060a435808b0135601f810183900483028401830190945283835297999835989760c4975091955060249190910193509091508190840183828082843750506040805160209735808a0135601f81018a90048a0283018a0190935282825296989760e4979196506024919091019450909250829150840183828082843750949650505050505050604080516101008101825260008082526020828101829052828401829052835180820185528281526060840152608083018290528351808201855282815260a08401528351808201855282815260c084015260e083018290528a825260019052919091205488141561077e57604080516020808252602a908201527f6368616e6e656c20776974682074686174206368616e6e656c496420616c7265818301527f6164792065786973747300000000000000000000000000000000000000000000606082015290517f08c379a0afcc32b1a39302f7cb8073359698411ab5fd6e3edb2c02c0b5fba8aa9181900360800190a1610774565b6040805160208181018352600080835260043580825260018084529185902060030180548651600294821615610100026000190190911693909304601f81018590048502840185019096528583526105fa9591949390919083018282801561074e5780601f106107235761010080835404028352916020019161074e565b610416600435600160a060020a0381166000908152602081905260409020545b919050565b60408051918252519081900360200190f35b60408051600160a060020a03929092168252519081900360200190f35b60408051898152600160a060020a0389811660208301528816918101919091526080810185905260ff821660e082015261010060608201818152875460026001821615840260001901909116049183018290529060a083019060c08401906101208501908a9080156104f85780601f106104cd576101008083540402835291602001916104f8565b820191906000526020600020905b8154815290600101906020018083116104db57829003601f168201915b50508481038352875460026001821615610100026000190190911604808252602091909101908890801561056d5780601f106105425761010080835404028352916020019161056d565b820191906000526020600020905b81548152906001019060200180831161055057829003601f168201915b5050848103825286546002600182161561010002600019019091160480825260209190910190879080156105e25780601f106105b7576101008083540402835291602001916105e2565b820191906000526020600020905b8154815290600101906020018083116105c557829003601f168201915b50509b50505050505050505050505060405180910390f35b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f16801561065a5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b505050602082015160408301516041840151600116601b81101561068a57601b015b600186828585604051808581526020018460ff1681526020018381526020018281526020019450505050506020604051808303816000866161da5a03f115610002575050604051519350610122565b600160a060020a031614949350505050565b5033600160a060020a039081166000908152602081905260408082208054859003905591841681522080548201905560015b92915050565b820191906000526020600020905b81548152906001019060200180831161073157829003601f168201915b50505050509050610411565b505060e091909101516007909101805460ff191690911790555b5050505050505050565b878787876040518085815260200184600160a060020a03166c0100000000000000000000000002815260140183600160a060020a03166c010000000000000000000000000281526014018280519060200190808383829060006004602084601f0104600f02600301f15090500194505050505060405180910390208414151561086657604080516020808252601a908201527f66696e6765727072696e7420646f6573206e6f74206d617463680000000000008183015290517f08c379a0afcc32b1a39302f7cb8073359698411ab5fd6e3edb2c02c0b5fba8aa9181900360600190a1610774565b5060408051610100818101835289825260208281018a81528385018a8152606085018a8152608086018a905260a0860189905260c08601889052600060e087018190528e81526001808652978120875181559351848901805473ffffffffffffffffffffffffffffffffffffffff199081169092179055925160028581018054909516909117909355905180516003850180548185529387902098998a9996989197908516159091026000190190931693909304601f90810183900485019492919091019083901061095b57805160ff19168380011785555b5061098b9291505b808211156109f75760008155600101610947565b8280016001018555821561093f579182015b8281111561093f57825182600050559160200191906001019061096d565b50506080820151816004016000505560a0820151816005016000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106109fb57805160ff19168380011785555b50610a2b929150610947565b5090565b828001600101855582156109eb579182015b828111156109eb578251826000505591602001919060010190610a0d565b505060c0820151816006016000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610a8a57805160ff19168380011785555b5061075a929150610947565b82800160010185558215610a7e579182015b82811115610a7e578251826000505591602001919060010190610a9c56",
    unlinked_binary: "6060604052600160a060020a03321660009081526020819052604090206127109055610aba8061002f6000396000f3606060405236156100615760e060020a600035046339cdde32811461006357806377d32e94146100c45780637a7ebd7b1461012b57806390b98a111461017c57806396bba5ed146101ab578063d18da8b114610373578063f8b2cb4f146103f1575b005b60408051602060248035600481810135601f810185900485028601850190965285855261041695813595919460449492939092019181908401838280828437509496505093359350505050600081600160a060020a03166106d9858561010e565b60408051602060248035600481810135601f810185900485028601850190965285855261042895813595919460449492939092019181908401838280828437509496505050505050505b600060006000600084516041141515610668575b50505092915050565b600160208190526004803560009081526040902080549281015460028201549282015460078301546104459594600160a060020a039384169493169260038101929160058201916006019060ff1688565b61041660043560243533600160a060020a0316600090815260208190526040812054829010156106eb5761071d565b604080516020606435600481810135601f8101849004840285018401909552848452610061948135946024803595604435956084949201919081908401838280828437505060408051602060a435808b0135601f810183900483028401830190945283835297999835989760c4975091955060249190910193509091508190840183828082843750506040805160209735808a0135601f81018a90048a0283018a0190935282825296989760e4979196506024919091019450909250829150840183828082843750949650505050505050604080516101008101825260008082526020828101829052828401829052835180820185528281526060840152608083018290528351808201855282815260a08401528351808201855282815260c084015260e083018290528a825260019052919091205488141561077e57604080516020808252602a908201527f6368616e6e656c20776974682074686174206368616e6e656c496420616c7265818301527f6164792065786973747300000000000000000000000000000000000000000000606082015290517f08c379a0afcc32b1a39302f7cb8073359698411ab5fd6e3edb2c02c0b5fba8aa9181900360800190a1610774565b6040805160208181018352600080835260043580825260018084529185902060030180548651600294821615610100026000190190911693909304601f81018590048502840185019096528583526105fa9591949390919083018282801561074e5780601f106107235761010080835404028352916020019161074e565b610416600435600160a060020a0381166000908152602081905260409020545b919050565b60408051918252519081900360200190f35b60408051600160a060020a03929092168252519081900360200190f35b60408051898152600160a060020a0389811660208301528816918101919091526080810185905260ff821660e082015261010060608201818152875460026001821615840260001901909116049183018290529060a083019060c08401906101208501908a9080156104f85780601f106104cd576101008083540402835291602001916104f8565b820191906000526020600020905b8154815290600101906020018083116104db57829003601f168201915b50508481038352875460026001821615610100026000190190911604808252602091909101908890801561056d5780601f106105425761010080835404028352916020019161056d565b820191906000526020600020905b81548152906001019060200180831161055057829003601f168201915b5050848103825286546002600182161561010002600019019091160480825260209190910190879080156105e25780601f106105b7576101008083540402835291602001916105e2565b820191906000526020600020905b8154815290600101906020018083116105c557829003601f168201915b50509b50505050505050505050505060405180910390f35b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f16801561065a5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b505050602082015160408301516041840151600116601b81101561068a57601b015b600186828585604051808581526020018460ff1681526020018381526020018281526020019450505050506020604051808303816000866161da5a03f115610002575050604051519350610122565b600160a060020a031614949350505050565b5033600160a060020a039081166000908152602081905260408082208054859003905591841681522080548201905560015b92915050565b820191906000526020600020905b81548152906001019060200180831161073157829003601f168201915b50505050509050610411565b505060e091909101516007909101805460ff191690911790555b5050505050505050565b878787876040518085815260200184600160a060020a03166c0100000000000000000000000002815260140183600160a060020a03166c010000000000000000000000000281526014018280519060200190808383829060006004602084601f0104600f02600301f15090500194505050505060405180910390208414151561086657604080516020808252601a908201527f66696e6765727072696e7420646f6573206e6f74206d617463680000000000008183015290517f08c379a0afcc32b1a39302f7cb8073359698411ab5fd6e3edb2c02c0b5fba8aa9181900360600190a1610774565b5060408051610100818101835289825260208281018a81528385018a8152606085018a8152608086018a905260a0860189905260c08601889052600060e087018190528e81526001808652978120875181559351848901805473ffffffffffffffffffffffffffffffffffffffff199081169092179055925160028581018054909516909117909355905180516003850180548185529387902098998a9996989197908516159091026000190190931693909304601f90810183900485019492919091019083901061095b57805160ff19168380011785555b5061098b9291505b808211156109f75760008155600101610947565b8280016001018555821561093f579182015b8281111561093f57825182600050559160200191906001019061096d565b50506080820151816004016000505560a0820151816005016000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106109fb57805160ff19168380011785555b50610a2b929150610947565b5090565b828001600101855582156109eb579182015b828111156109eb578251826000505591602001919060010190610a0d565b505060c0820151816006016000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610a8a57805160ff19168380011785555b5061075a929150610947565b82800160010185558215610a7e579182015b82811115610a7e578251826000505591602001919060010190610a9c56",
    address: "0x65fd30f006496ef143cbac269c1dacbdccede3f4",
    generated_with: "2.0.6",
    contract_name: "StateChannels"
  };

  function Contract() {
    if (Contract.Pudding == null) {
      throw new Error("StateChannels error: Please call load() first before creating new instance of this contract.");
    }

    Contract.Pudding.apply(this, arguments);
  };

  Contract.load = function(Pudding) {
    Contract.Pudding = Pudding;

    Pudding.whisk(contract_data, Contract);

    // Return itself for backwards compatibility.
    return Contract;
  }

  Contract.new = function() {
    if (Contract.Pudding == null) {
      throw new Error("StateChannels error: Please call load() first before calling new().");
    }

    return Contract.Pudding.new.apply(Contract, arguments);
  };

  Contract.at = function() {
    if (Contract.Pudding == null) {
      throw new Error("StateChannels error: lease call load() first before calling at().");
    }

    return Contract.Pudding.at.apply(Contract, arguments);
  };

  Contract.deployed = function() {
    if (Contract.Pudding == null) {
      throw new Error("StateChannels error: Please call load() first before calling deployed().");
    }

    return Contract.Pudding.deployed.apply(Contract, arguments);
  };

  if (typeof module != "undefined" && typeof module.exports != "undefined") {
    module.exports = Contract;
  } else {
    // There will only be one version of Pudding in the browser,
    // and we can use that.
    window.StateChannels = Contract;
  }

})();
