// Factory "morphs" into a Pudding class.
// The reasoning is that calling load in each context
// is cumbersome.

(function() {

  var contract_data = {
    abi: [{"constant":false,"inputs":[{"name":"hash","type":"bytes32"},{"name":"sig","type":"bytes"},{"name":"signer","type":"address"}],"name":"ecverify","outputs":[{"name":"b","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"hash","type":"bytes32"},{"name":"sig","type":"bytes"}],"name":"ecrecovery","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"channels","outputs":[{"name":"channelId","type":"bytes32"},{"name":"addr0","type":"address"},{"name":"addr1","type":"address"},{"name":"state","type":"bytes"},{"name":"fingerprint","type":"bytes32"},{"name":"signature0","type":"bytes"},{"name":"signature1","type":"bytes"},{"name":"phase","type":"uint8"}],"type":"function"},{"constant":false,"inputs":[{"name":"receiver","type":"address"},{"name":"amount","type":"uint256"}],"name":"sendCoin","outputs":[{"name":"sufficient","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"channelId","type":"bytes32"},{"name":"addr0","type":"address"},{"name":"addr1","type":"address"},{"name":"state","type":"bytes"},{"name":"fingerprint","type":"bytes32"},{"name":"signature0","type":"bytes"},{"name":"signature1","type":"bytes"}],"name":"addChannel","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"channelId","type":"bytes32"}],"name":"getChannelState","outputs":[{"name":"","type":"bytes"}],"type":"function"},{"constant":false,"inputs":[{"name":"addr","type":"address"}],"name":"getBalance","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"inputs":[],"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"message","type":"string"}],"name":"Error","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"label","type":"string"},{"indexed":false,"name":"message","type":"string"}],"name":"LogString","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"label","type":"string"},{"indexed":false,"name":"message","type":"bytes32"}],"name":"LogBytes","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"label","type":"string"},{"indexed":false,"name":"message","type":"bytes32"}],"name":"LogBytes32","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"num","type":"uint8"}],"name":"LogNum","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"b","type":"bool"}],"name":"LogBool","type":"event"}],
    binary: "6060604052600160a060020a03321660009081526020819052604090206127109055610c268061002f6000396000f3606060405236156100615760e060020a600035046339cdde32811461006357806377d32e94146100c55780637a7ebd7b1461012757806390b98a111461017857806396bba5ed146101a7578063d18da8b11461035d578063f8b2cb4f146103db575b005b60408051602060248035600481810135601f8101859004850286018501909652858552610400958135959194604494929390920191819084018382808284375094965050933593505050505b600081600160a060020a0316610735858561010f565b60408051602060248035600481810135601f810185900485028601850190965285855261041295813595919460449492939092019181908401838280828437509496505050505050505b60006000600060008451604114151561065257610002565b6001602081905260048035600090815260409020805492810154600282015492820154600783015461042f9594600160a060020a039384169493169260038101929160058201916006019060ff1688565b61040060043560243533600160a060020a031660009081526020819052604081205482901015610781576107b3565b604080516020606435600481810135601f8101849004840285018401909552848452610061948135946024803595604435956084949201919081908401838280828437505060408051602060a435808b0135601f810183900483028401830190945283835297999835989760c4975091955060249190910193509091508190840183828082843750506040805160209735808a0135601f81018a90048a0283018a0190935282825296989760e4979196506024919091019450909250829150840183828082843750949650505050505050604080516101008101825260008082526020828101829052828401829052835180820185528281526060840152608083018290528351808201855282815260a08401528351808201855282815260c084015260e083018290528a825260019052919091205488141561081457604080516020808252602a908201527f6368616e6e656c20776974682074686174206368616e6e656c496420616c7265818301527f616479206578697374730000000000000000000000000000000000000000000060608201529051600080516020610c068339815191529181900360800190a161080a565b6040805160208181018352600080835260043580825260018084529185902060030180548651600294821615610100026000190190911693909304601f81018590048502840185019096528583526105e4959194939091908301828280156107e45780601f106107b9576101008083540402835291602001916107e4565b610400600435600160a060020a0381166000908152602081905260409020545b919050565b60408051918252519081900360200190f35b60408051600160a060020a03929092168252519081900360200190f35b60408051898152600160a060020a0389811660208301528816918101919091526080810185905260ff821660e082015261010060608201818152875460026001821615840260001901909116049183018290529060a083019060c08401906101208501908a9080156104e25780601f106104b7576101008083540402835291602001916104e2565b820191906000526020600020905b8154815290600101906020018083116104c557829003601f168201915b5050848103835287546002600182161561010002600019019091160480825260209190910190889080156105575780601f1061052c57610100808354040283529160200191610557565b820191906000526020600020905b81548152906001019060200180831161053a57829003601f168201915b5050848103825286546002600182161561010002600019019091160480825260209190910190879080156105cc5780601f106105a1576101008083540402835291602001916105cc565b820191906000526020600020905b8154815290600101906020018083116105af57829003601f168201915b50509b50505050505050505050505060405180910390f35b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f1680156106445780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b50506040805160208581015186840151604188015160ff81168552945191955093927f6eb4dfa3aaaccfd9808ba31f45f31c585da5460677f6491f773cba39ee872c3492908290030190a1601b8160ff1610156106ad57601b015b6040805160ff8316815290517f6eb4dfa3aaaccfd9808ba31f45f31c585da5460677f6491f773cba39ee872c349181900360200190a1600186828585604051808581526020018460ff1681526020018381526020018281526020019450505050506020604051808303816000866161da5a03f115610002575050604051519695505050505050565b600160a060020a031614905080507fc33356bc2bad2ce263b056da5d061d4e89c336823d5e77f14c1383aedb7a1b3a816040518082815260200191505060405180910390a19392505050565b5033600160a060020a039081166000908152602081905260408082208054859003905591841681522080548201905560015b92915050565b820191906000526020600020905b8154815290600101906020018083116107c757829003601f168201915b505050505090506103fb565b505060e091909101516007909101805460ff191690911790555b5050505050505050565b878787876040518085815260200184600160a060020a03166c0100000000000000000000000002815260140183600160a060020a03166c010000000000000000000000000281526014018280519060200190808383829060006004602084601f0104600f02600301f1509050019450505050506040518091039020841415156108ea57604080516020808252601a908201527f66696e6765727072696e7420646f6573206e6f74206d61746368000000000000818301529051600080516020610c068339815191529181900360600190a161080a565b6108f58484896100af565b151561094e576040805160208082526012908201527f7369676e61747572653020696e76616c69640000000000000000000000000000818301529051600080516020610c068339815191529181900360600190a161080a565b6109598483886100af565b15156109b2576040805160208082526012908201527f7369676e61747572653120696e76616c69640000000000000000000000000000818301529051600080516020610c068339815191529181900360600190a161080a565b5060408051610100818101835289825260208281018a81528385018a8152606085018a8152608086018a905260a0860189905260c08601889052600060e087018190528e81526001808652978120875181559351848901805473ffffffffffffffffffffffffffffffffffffffff199081169092179055925160028581018054909516909117909355905180516003850180548185529387902098998a9996989197908516159091026000190190931693909304601f908101839004850194929190910190839010610aa757805160ff19168380011785555b50610ad79291505b80821115610b435760008155600101610a93565b82800160010185558215610a8b579182015b82811115610a8b578251826000505591602001919060010190610ab9565b50506080820151816004016000505560a0820151816005016000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610b4757805160ff19168380011785555b50610b77929150610a93565b5090565b82800160010185558215610b37579182015b82811115610b37578251826000505591602001919060010190610b59565b505060c0820151816006016000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610bd657805160ff19168380011785555b506107f0929150610a93565b82800160010185558215610bca579182015b82811115610bca578251826000505591602001919060010190610be85608c379a0afcc32b1a39302f7cb8073359698411ab5fd6e3edb2c02c0b5fba8aa",
    unlinked_binary: "6060604052600160a060020a03321660009081526020819052604090206127109055610c268061002f6000396000f3606060405236156100615760e060020a600035046339cdde32811461006357806377d32e94146100c55780637a7ebd7b1461012757806390b98a111461017857806396bba5ed146101a7578063d18da8b11461035d578063f8b2cb4f146103db575b005b60408051602060248035600481810135601f8101859004850286018501909652858552610400958135959194604494929390920191819084018382808284375094965050933593505050505b600081600160a060020a0316610735858561010f565b60408051602060248035600481810135601f810185900485028601850190965285855261041295813595919460449492939092019181908401838280828437509496505050505050505b60006000600060008451604114151561065257610002565b6001602081905260048035600090815260409020805492810154600282015492820154600783015461042f9594600160a060020a039384169493169260038101929160058201916006019060ff1688565b61040060043560243533600160a060020a031660009081526020819052604081205482901015610781576107b3565b604080516020606435600481810135601f8101849004840285018401909552848452610061948135946024803595604435956084949201919081908401838280828437505060408051602060a435808b0135601f810183900483028401830190945283835297999835989760c4975091955060249190910193509091508190840183828082843750506040805160209735808a0135601f81018a90048a0283018a0190935282825296989760e4979196506024919091019450909250829150840183828082843750949650505050505050604080516101008101825260008082526020828101829052828401829052835180820185528281526060840152608083018290528351808201855282815260a08401528351808201855282815260c084015260e083018290528a825260019052919091205488141561081457604080516020808252602a908201527f6368616e6e656c20776974682074686174206368616e6e656c496420616c7265818301527f616479206578697374730000000000000000000000000000000000000000000060608201529051600080516020610c068339815191529181900360800190a161080a565b6040805160208181018352600080835260043580825260018084529185902060030180548651600294821615610100026000190190911693909304601f81018590048502840185019096528583526105e4959194939091908301828280156107e45780601f106107b9576101008083540402835291602001916107e4565b610400600435600160a060020a0381166000908152602081905260409020545b919050565b60408051918252519081900360200190f35b60408051600160a060020a03929092168252519081900360200190f35b60408051898152600160a060020a0389811660208301528816918101919091526080810185905260ff821660e082015261010060608201818152875460026001821615840260001901909116049183018290529060a083019060c08401906101208501908a9080156104e25780601f106104b7576101008083540402835291602001916104e2565b820191906000526020600020905b8154815290600101906020018083116104c557829003601f168201915b5050848103835287546002600182161561010002600019019091160480825260209190910190889080156105575780601f1061052c57610100808354040283529160200191610557565b820191906000526020600020905b81548152906001019060200180831161053a57829003601f168201915b5050848103825286546002600182161561010002600019019091160480825260209190910190879080156105cc5780601f106105a1576101008083540402835291602001916105cc565b820191906000526020600020905b8154815290600101906020018083116105af57829003601f168201915b50509b50505050505050505050505060405180910390f35b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f1680156106445780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b50506040805160208581015186840151604188015160ff81168552945191955093927f6eb4dfa3aaaccfd9808ba31f45f31c585da5460677f6491f773cba39ee872c3492908290030190a1601b8160ff1610156106ad57601b015b6040805160ff8316815290517f6eb4dfa3aaaccfd9808ba31f45f31c585da5460677f6491f773cba39ee872c349181900360200190a1600186828585604051808581526020018460ff1681526020018381526020018281526020019450505050506020604051808303816000866161da5a03f115610002575050604051519695505050505050565b600160a060020a031614905080507fc33356bc2bad2ce263b056da5d061d4e89c336823d5e77f14c1383aedb7a1b3a816040518082815260200191505060405180910390a19392505050565b5033600160a060020a039081166000908152602081905260408082208054859003905591841681522080548201905560015b92915050565b820191906000526020600020905b8154815290600101906020018083116107c757829003601f168201915b505050505090506103fb565b505060e091909101516007909101805460ff191690911790555b5050505050505050565b878787876040518085815260200184600160a060020a03166c0100000000000000000000000002815260140183600160a060020a03166c010000000000000000000000000281526014018280519060200190808383829060006004602084601f0104600f02600301f1509050019450505050506040518091039020841415156108ea57604080516020808252601a908201527f66696e6765727072696e7420646f6573206e6f74206d61746368000000000000818301529051600080516020610c068339815191529181900360600190a161080a565b6108f58484896100af565b151561094e576040805160208082526012908201527f7369676e61747572653020696e76616c69640000000000000000000000000000818301529051600080516020610c068339815191529181900360600190a161080a565b6109598483886100af565b15156109b2576040805160208082526012908201527f7369676e61747572653120696e76616c69640000000000000000000000000000818301529051600080516020610c068339815191529181900360600190a161080a565b5060408051610100818101835289825260208281018a81528385018a8152606085018a8152608086018a905260a0860189905260c08601889052600060e087018190528e81526001808652978120875181559351848901805473ffffffffffffffffffffffffffffffffffffffff199081169092179055925160028581018054909516909117909355905180516003850180548185529387902098998a9996989197908516159091026000190190931693909304601f908101839004850194929190910190839010610aa757805160ff19168380011785555b50610ad79291505b80821115610b435760008155600101610a93565b82800160010185558215610a8b579182015b82811115610a8b578251826000505591602001919060010190610ab9565b50506080820151816004016000505560a0820151816005016000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610b4757805160ff19168380011785555b50610b77929150610a93565b5090565b82800160010185558215610b37579182015b82811115610b37578251826000505591602001919060010190610b59565b505060c0820151816006016000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610bd657805160ff19168380011785555b506107f0929150610a93565b82800160010185558215610bca579182015b82811115610bca578251826000505591602001919060010190610be85608c379a0afcc32b1a39302f7cb8073359698411ab5fd6e3edb2c02c0b5fba8aa",
    address: "0x5fb6ee002bc08d50744fd364087151df5dfaf70f",
    generated_with: "2.0.6",
    contract_name: "StateChannels"
  };

  function Contract() {
    if (Contract.Pudding == null) {
      throw new Error("StateChannels error: Please call load() first before creating new instance of this contract.");
    }

    Contract.Pudding.apply(this, arguments);
  };

  Contract.load = function(Pudding) {
    Contract.Pudding = Pudding;

    Pudding.whisk(contract_data, Contract);

    // Return itself for backwards compatibility.
    return Contract;
  }

  Contract.new = function() {
    if (Contract.Pudding == null) {
      throw new Error("StateChannels error: Please call load() first before calling new().");
    }

    return Contract.Pudding.new.apply(Contract, arguments);
  };

  Contract.at = function() {
    if (Contract.Pudding == null) {
      throw new Error("StateChannels error: lease call load() first before calling at().");
    }

    return Contract.Pudding.at.apply(Contract, arguments);
  };

  Contract.deployed = function() {
    if (Contract.Pudding == null) {
      throw new Error("StateChannels error: Please call load() first before calling deployed().");
    }

    return Contract.Pudding.deployed.apply(Contract, arguments);
  };

  if (typeof module != "undefined" && typeof module.exports != "undefined") {
    module.exports = Contract;
  } else {
    // There will only be one version of Pudding in the browser,
    // and we can use that.
    window.StateChannels = Contract;
  }

})();
