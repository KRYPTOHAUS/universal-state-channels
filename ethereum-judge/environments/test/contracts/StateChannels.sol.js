// Factory "morphs" into a Pudding class.
// The reasoning is that calling load in each context
// is cumbersome.

(function() {

  var contract_data = {
    abi: [{"constant":false,"inputs":[{"name":"hash","type":"bytes32"},{"name":"sig","type":"bytes"},{"name":"signer","type":"address"}],"name":"ecverify","outputs":[{"name":"b","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"hash","type":"bytes32"},{"name":"sig","type":"bytes"}],"name":"ecrecovery","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":false,"inputs":[{"name":"channelId","type":"bytes32"},{"name":"sequenceNumber","type":"uint256"},{"name":"state","type":"bytes"},{"name":"signature0","type":"bytes"},{"name":"signature1","type":"bytes"}],"name":"addUpdateTx","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"channelId","type":"bytes32"},{"name":"addr0","type":"address"},{"name":"addr1","type":"address"},{"name":"state","type":"bytes"},{"name":"challengePeriod","type":"uint256"},{"name":"signature0","type":"bytes"},{"name":"signature1","type":"bytes"}],"name":"addChannel","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"channelId","type":"bytes32"}],"name":"getChannelState","outputs":[{"name":"","type":"bytes"}],"type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"name":"message","type":"string"}],"name":"Error","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"label","type":"string"},{"indexed":false,"name":"message","type":"string"}],"name":"LogString","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"label","type":"string"},{"indexed":false,"name":"message","type":"bytes32"}],"name":"LogBytes","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"label","type":"string"},{"indexed":false,"name":"message","type":"bytes32"}],"name":"LogBytes32","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"num","type":"uint8"}],"name":"LogNum","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"num","type":"uint256"}],"name":"LogNum256","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"b","type":"bool"}],"name":"LogBool","type":"event"}],
    binary: "6060604052610ccc806100126000396000f3606060405260e060020a600035046339cdde32811461004757806377d32e94146100a95780637c01e46f14610110578063c8662b5d1461025c578063d18da8b11461041b575b005b60408051602060248035600481810135601f8101859004850286018501909652858552610496958135959194604494929390920191819084018382808284375094965050933593505050505b600081600160a060020a031661061385856100f3565b60408051602060248035600481810135601f81018590048502860185019096528585526104a895813595919460449492939092019181908401838280828437509496505050505050505b600060006000600084516041141515610533575b50505092915050565b604080516020604435600481810135601f8101849004840285018401909552848452610045948135946024803595939460649492939101918190840183828082843750506040805160209735808a0135601f81018a90048a0283018a0190935282825296989760849791965060249091019450909250829150840183828082843750506040805160209735808a0135601f81018a90048a0283018a0190935282825296989760a49791965060249190910194509092508291508401838280828437509496505050505050506000858585604051808481526020018381526020018280519060200190808383829060006004602084601f0104600f02600301f150905001935050505060405180910390209050610ad58184600060005060008a815260200190815260200160002060005060010160009054906101000a9004600160a060020a0316610093565b604080516020606435600481810135601f8101849004840285018401909552848452610045948135946024803595604435956084949201919081908401838280828437505060408051602060a435808b0135601f810183900483028401830190945283835297999835989760c4975091955060249190910193509091508190840183828082843750506040805160209735808a0135601f81018a90048a0283018a0190935282825296989760e497919650602491909101945090925082915084018382808284375094965050505050505060408051602081810183526000808352835161012081018552818152808301829052808501829052606081018290526080810182905260a081018290528451808401865282815260c082015260e08101829052845180840186528281526101008201528b825291819052928320548a14156106a757604080516020808252602a908201527f6368616e6e656c20776974682074686174206368616e6e656c496420616c7265818301527f616479206578697374730000000000000000000000000000000000000000000060608201529051600080516020610cac8339815191529181900360800190a161069b565b6104c56004356040805160208181018352600080835284815280825283902060050180548451601f60026000196101006001861615020190931692909204918201849004840281018401909552808552929392909183018282801561068a5780601f1061065f5761010080835404028352916020019161068a565b60408051918252519081900360200190f35b60408051600160a060020a03929092168252519081900360200190f35b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f1680156105255780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b50506040805160208581015186840151604188015160ff81168552945191955093927f6eb4dfa3aaaccfd9808ba31f45f31c585da5460677f6491f773cba39ee872c3492908290030190a1601b8160ff16101561058e57601b015b6040805160ff8316815290517f6eb4dfa3aaaccfd9808ba31f45f31c585da5460677f6491f773cba39ee872c349181900360200190a1600186828585604051808581526020018460ff1681526020018381526020018281526020019450505050506020604051808303816000866161da5a03f115610002575050604051519350610107565b600160a060020a031614905080507fc33356bc2bad2ce263b056da5d061d4e89c336823d5e77f14c1383aedb7a1b3a816040518082815260200191505060405180910390a19392505050565b820191906000526020600020905b81548152906001019060200180831161066d57829003601f168201915b50505050509050919050565b505050505b50505050505050505050565b898989896040518085815260200184600160a060020a03166c0100000000000000000000000002815260140183600160a060020a03166c010000000000000000000000000281526014018280519060200190808383829060006004602084601f0104600f02600301f1509050019450505050506040518091039020925061072f83868b610093565b1515610788576040805160208082526012908201527f7369676e61747572653020696e76616c69640000000000000000000000000000818301529051600080516020610cac8339815191529181900360600190a161069b565b61079383858a610093565b15156107ec576040805160208082526012908201527f7369676e61747572653120696e76616c69640000000000000000000000000000818301529051600080516020610cac8339815191529181900360600190a161069b565b610120604051908101604052808b81526020018a815260200189815260200160008152602001878152602001600081526020018881526020016000815260200183815260200150905080600060005060008c81526020019081526020016000206000506000820151816000016000505560208201518160010160006101000a815481600160a060020a030219169083021790555060408201518160020160006101000a815481600160a060020a030219169083021790555060608201518160020160146101000a81548160ff021916908302179055506080820151816003016000505560a0820151816004016000505560c0820151816005016000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061094957805160ff19168380011785555b506109799291505b80821115610a135760008155600101610935565b8280016001018555821561092d579182015b8281111561092d57825182600050559160200191906001019061095b565b505060e08201516006820155610100820151805160078301805482825560008281526020908190209294918301939291018215610a17579160200282015b82811115610a17578251829080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610a5757805160ff19168380011785555b50610a87929150610935565b5090565b506106969291505b80821115610a13576000818150805460018160011615610100020316600290046000825580601f10610a9857505b5050600101610a1f565b82800160010185558215610a07579182015b82811115610a07578251826000505591602001919060010190610a69565b5050916020019190600101906109b7565b601f016020900490600052602060002090810190610a4d9190610935565b505060008681526020819052604090206006018590555b505050505050565b1515610b2e576040805160208082526012908201527f7369676e61747572653020696e76616c69640000000000000000000000000000818301529051600080516020610cac8339815191529181900360600190a1610acd565b600086815260208190526040902060020154610b569082908490600160a060020a0316610093565b1515610baf576040805160208082526012908201527f7369676e61747572653120696e76616c69640000000000000000000000000000818301529051600080516020610cac8339815191529181900360600190a1610acd565b6000868152602081905260409020600601548511610c1a57604080516020808252601d908201527f6869676865722073657175656e6365206e756d62657220657869737473000000818301529051600080516020610cac8339815191529181900360600190a1610acd565b60008681526020818152604082208651600591909101805481855293839020909360026001821615610100026000190190911604601f908101849004820193890190839010610c7c57805160ff19168380011785555b50610ab6929150610935565b82800160010185558215610c70579182015b82811115610c70578251826000505591602001919060010190610c8e5608c379a0afcc32b1a39302f7cb8073359698411ab5fd6e3edb2c02c0b5fba8aa",
    unlinked_binary: "6060604052610ccc806100126000396000f3606060405260e060020a600035046339cdde32811461004757806377d32e94146100a95780637c01e46f14610110578063c8662b5d1461025c578063d18da8b11461041b575b005b60408051602060248035600481810135601f8101859004850286018501909652858552610496958135959194604494929390920191819084018382808284375094965050933593505050505b600081600160a060020a031661061385856100f3565b60408051602060248035600481810135601f81018590048502860185019096528585526104a895813595919460449492939092019181908401838280828437509496505050505050505b600060006000600084516041141515610533575b50505092915050565b604080516020604435600481810135601f8101849004840285018401909552848452610045948135946024803595939460649492939101918190840183828082843750506040805160209735808a0135601f81018a90048a0283018a0190935282825296989760849791965060249091019450909250829150840183828082843750506040805160209735808a0135601f81018a90048a0283018a0190935282825296989760a49791965060249190910194509092508291508401838280828437509496505050505050506000858585604051808481526020018381526020018280519060200190808383829060006004602084601f0104600f02600301f150905001935050505060405180910390209050610ad58184600060005060008a815260200190815260200160002060005060010160009054906101000a9004600160a060020a0316610093565b604080516020606435600481810135601f8101849004840285018401909552848452610045948135946024803595604435956084949201919081908401838280828437505060408051602060a435808b0135601f810183900483028401830190945283835297999835989760c4975091955060249190910193509091508190840183828082843750506040805160209735808a0135601f81018a90048a0283018a0190935282825296989760e497919650602491909101945090925082915084018382808284375094965050505050505060408051602081810183526000808352835161012081018552818152808301829052808501829052606081018290526080810182905260a081018290528451808401865282815260c082015260e08101829052845180840186528281526101008201528b825291819052928320548a14156106a757604080516020808252602a908201527f6368616e6e656c20776974682074686174206368616e6e656c496420616c7265818301527f616479206578697374730000000000000000000000000000000000000000000060608201529051600080516020610cac8339815191529181900360800190a161069b565b6104c56004356040805160208181018352600080835284815280825283902060050180548451601f60026000196101006001861615020190931692909204918201849004840281018401909552808552929392909183018282801561068a5780601f1061065f5761010080835404028352916020019161068a565b60408051918252519081900360200190f35b60408051600160a060020a03929092168252519081900360200190f35b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f1680156105255780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b50506040805160208581015186840151604188015160ff81168552945191955093927f6eb4dfa3aaaccfd9808ba31f45f31c585da5460677f6491f773cba39ee872c3492908290030190a1601b8160ff16101561058e57601b015b6040805160ff8316815290517f6eb4dfa3aaaccfd9808ba31f45f31c585da5460677f6491f773cba39ee872c349181900360200190a1600186828585604051808581526020018460ff1681526020018381526020018281526020019450505050506020604051808303816000866161da5a03f115610002575050604051519350610107565b600160a060020a031614905080507fc33356bc2bad2ce263b056da5d061d4e89c336823d5e77f14c1383aedb7a1b3a816040518082815260200191505060405180910390a19392505050565b820191906000526020600020905b81548152906001019060200180831161066d57829003601f168201915b50505050509050919050565b505050505b50505050505050505050565b898989896040518085815260200184600160a060020a03166c0100000000000000000000000002815260140183600160a060020a03166c010000000000000000000000000281526014018280519060200190808383829060006004602084601f0104600f02600301f1509050019450505050506040518091039020925061072f83868b610093565b1515610788576040805160208082526012908201527f7369676e61747572653020696e76616c69640000000000000000000000000000818301529051600080516020610cac8339815191529181900360600190a161069b565b61079383858a610093565b15156107ec576040805160208082526012908201527f7369676e61747572653120696e76616c69640000000000000000000000000000818301529051600080516020610cac8339815191529181900360600190a161069b565b610120604051908101604052808b81526020018a815260200189815260200160008152602001878152602001600081526020018881526020016000815260200183815260200150905080600060005060008c81526020019081526020016000206000506000820151816000016000505560208201518160010160006101000a815481600160a060020a030219169083021790555060408201518160020160006101000a815481600160a060020a030219169083021790555060608201518160020160146101000a81548160ff021916908302179055506080820151816003016000505560a0820151816004016000505560c0820151816005016000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061094957805160ff19168380011785555b506109799291505b80821115610a135760008155600101610935565b8280016001018555821561092d579182015b8281111561092d57825182600050559160200191906001019061095b565b505060e08201516006820155610100820151805160078301805482825560008281526020908190209294918301939291018215610a17579160200282015b82811115610a17578251829080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610a5757805160ff19168380011785555b50610a87929150610935565b5090565b506106969291505b80821115610a13576000818150805460018160011615610100020316600290046000825580601f10610a9857505b5050600101610a1f565b82800160010185558215610a07579182015b82811115610a07578251826000505591602001919060010190610a69565b5050916020019190600101906109b7565b601f016020900490600052602060002090810190610a4d9190610935565b505060008681526020819052604090206006018590555b505050505050565b1515610b2e576040805160208082526012908201527f7369676e61747572653020696e76616c69640000000000000000000000000000818301529051600080516020610cac8339815191529181900360600190a1610acd565b600086815260208190526040902060020154610b569082908490600160a060020a0316610093565b1515610baf576040805160208082526012908201527f7369676e61747572653120696e76616c69640000000000000000000000000000818301529051600080516020610cac8339815191529181900360600190a1610acd565b6000868152602081905260409020600601548511610c1a57604080516020808252601d908201527f6869676865722073657175656e6365206e756d62657220657869737473000000818301529051600080516020610cac8339815191529181900360600190a1610acd565b60008681526020818152604082208651600591909101805481855293839020909360026001821615610100026000190190911604601f908101849004820193890190839010610c7c57805160ff19168380011785555b50610ab6929150610935565b82800160010185558215610c70579182015b82811115610c70578251826000505591602001919060010190610c8e5608c379a0afcc32b1a39302f7cb8073359698411ab5fd6e3edb2c02c0b5fba8aa",
    address: "0x171d4498c3a18926dd4f2a728a6f2f33b7fd9b66",
    generated_with: "2.0.6",
    contract_name: "StateChannels"
  };

  function Contract() {
    if (Contract.Pudding == null) {
      throw new Error("StateChannels error: Please call load() first before creating new instance of this contract.");
    }

    Contract.Pudding.apply(this, arguments);
  };

  Contract.load = function(Pudding) {
    Contract.Pudding = Pudding;

    Pudding.whisk(contract_data, Contract);

    // Return itself for backwards compatibility.
    return Contract;
  }

  Contract.new = function() {
    if (Contract.Pudding == null) {
      throw new Error("StateChannels error: Please call load() first before calling new().");
    }

    return Contract.Pudding.new.apply(Contract, arguments);
  };

  Contract.at = function() {
    if (Contract.Pudding == null) {
      throw new Error("StateChannels error: lease call load() first before calling at().");
    }

    return Contract.Pudding.at.apply(Contract, arguments);
  };

  Contract.deployed = function() {
    if (Contract.Pudding == null) {
      throw new Error("StateChannels error: Please call load() first before calling deployed().");
    }

    return Contract.Pudding.deployed.apply(Contract, arguments);
  };

  if (typeof module != "undefined" && typeof module.exports != "undefined") {
    module.exports = Contract;
  } else {
    // There will only be one version of Pudding in the browser,
    // and we can use that.
    window.StateChannels = Contract;
  }

})();
